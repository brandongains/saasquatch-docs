@sections.apiReference(
    "Rest API Reference",
    "Our Rest API let's you build your own custom logic on top of your referral program. This API reference includes a guide to using all the methods of the Referral SaaSquatch Rest API."
) {
    <section>
        <div class="page-header">
            <h1>Rest API Reference</h1>
        </div>

        <p class="lead">
            Our Rest API let's you build your own custom logic on top of your referral program. This API reference includes a guide to using all the methods of the Referral SaaSquatch Rest API
        </p>

        @tags.apiSummaryTable()
        
        
        
        
        
        
        
        
        <div class="apidocs-section">
        
        <h2>Update an account</h2>
        <a id="account_sync" name="account_sync" class="section-anchor">&nbsp;</a>

        <p>Use this method to update SaaSquatch when the status of an account changes or when a new account is created. 
            If you're using a payment system connector, such as the Recurly connector, then you won't need to use this method. We automatically track account status for Braintree, Stripe, Reculy and Zuora.</p>
        <h4>Definition</h4>
        <pre class="prettyprint lang-curl">POST https://app.referralsaasquatch.com/api/v1/{TENANT_ALIAS}/accountsync</pre>

        <h4>Arguments</h4>
        <div>
            <table class="table table-hover apidocs-args">
              <tr>
                <th class="docs-monospace">id</th>
                <td><span class="label">Required</span></td>
                <td>
                    The id of the account. This should be the same <code>account_id</code> used for <a href="/app-integration">squatch.js</a>. Not sure what to use here? See <a href="/shared-vs-solo-accounts">Shared vs. Solo accounts</a>
                </td>
              </tr>
              <tr>
                <th class="docs-monospace">subscription</th>
                <td><span class="label">Required</span></td>
                <td>
                    An object describing the current subscription for this account.<br><br>

                    <table class="table table-hover">
                          <tr>
                            <th class="docs-monospace">status</th>
                            <td>
                                The status of the subscription. One of <code>PAID</code>, <code>TRAIL</code>, <code>FREE</code> or <code>CANCELLED</code>, 
                            </td>
                          </tr>
                          <tr>
                            <th class="docs-monospace">billingIntervalType</th>
                            <td>
                                The unit type for <code>billingIntervalValue</code>. One of <code>DAY</code>, <code>WEEK</code>, <code>MONTH</code>,  <code>QUARTER</code>, <code>SEMI_ANNUAL</code> or <code>YEAR</code>.
                                Required when <code>status: PAID</code>.
                            </td>
                          </tr>
                          <tr>
                            <th class="docs-monospace">billingIntervalValue</th>
                            <td>
                                The number of <code>billingIntervalType</code>. Required when <code>status: PAID</code>.<br/>
                                
                                <table class="table">
                                    <caption>Example billing intervals</caption>
                                    <tr><td></td><td>billingIntervalValue</td><td>billingIntervalType</td></tr>
                                    <tr><td>Monthly billing</td><td>1</td><td>MONTH</td></tr>
                                    <tr><td>Yearly billing</td><td>1</td><td>YEAR</td></tr>
                                    <tr><td>4 Month billing</td><td>4</td><td>MONTH</td></tr>
                                </table>

                            </td>
                          </tr>
                          <tr>
                            <th class="docs-monospace">value</th>
                            <td>
                                Dollar value of the subscription per renewal. Required when <code>status: PAID</code>.
                            </td>
                          </tr>
                    </table>
                </td>
              </tr>
              <tr>
                <th class="docs-monospace">referral</th>
                <td><span class="label">Optional</span></td>
                <td>
                    Info about who referred this account. Use this on first signup.<br><br>
                    
                    <table class="table table-hover">
                          <tr>
                            <th class="docs-monospace">code</th>
                            <td>
                                The referral code of the person that referred this account. Use <a href="/squatchjs#autofill">squatch.js autofill</a> to retrieve this value from the tracking cookie on your checkout form.
                            </td>
                          </tr>
                    </table>
                </td>
              </tr>
              <tr>
                <th class="docs-monospace">currency</th>
                <td><span class="label">Optional</span></td>
                <td>
                    Default is "USD". Otherwise use a ISO 4217 Standard currency code in uppercase.
                </td>
              </tr>
              </table>
        </div>
    
        <h4>Returns</h4>
        <p>The current status of the account, mirroring the input, or an HTTP Error code on error.</p>

        @tags.exampleCurl("account_sync",
"""
$ curl https://app.referralsaasquatch.com/api/v1/{TENANT_ALIAS}/accountsync \
-u API_KEY: \
-H "Content-Type: application/json" \
-d '{
    "id": "a1234",
    "currency": "USD",
    "subscription": {
        "status": "PAID",
        "value": 99.99,
        "billingIntervalType": "DAY",
        "billingIntervalValue": 30
    },
    "referral": {
        "code": "3j033r"
    }
}'
""",
"""
{
    "id": "a1234",
    "currency": "USD",
    "subscription": {
        "status": "PAID",
        "value": 99.99,
        "billingIntervalType": "DAY",
        "billingIntervalValue": 30
    },
    "referral": {
        "code": "3j033r"
    }
}
""")

    </div><!-- // .apidocs-section -->























      <div class="apidocs-section">

        <h2>Lookup a referral code</h2>
        <a id="get_code" name="get_code" class="section-anchor">&nbsp;</a>

        <p>Looks up a referral code and the attached details. Works with: @metadata.API.discount @metadata.API.feature @metadata.API.freeTime @metadata.API.credit</p>
        <h4>Definition</h4>
        <pre class="prettyprint lang-curl">GET https://app.referralsaasquatch.com/api/v1/{TENANT_ALIAS}/code/{CODE}</pre>

        <h4>Arguments</h4>
        <div>
            <table class="table table-hover apidocs-args">
               <tr>
                <th class="docs-monospace">code</th>
                <td><span class="label">Required</span></td>

                <td>
                    The referral code to look up. E.g. "BOBTESTERSON"
                </td>
              </tr>
            </table>
        </div>
        
        <h4>Returns</h4>
        <p>Details of the referral code</p>

        <table class="table table-hover apidocs-args">
            <tr>
                <th class="docs-monospace">code</th>
                <td>String</td>
                <td>
                    The unique identifier for the code. E.g. "BOBTESTERSON"
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">dateCreated</th>
                <td>Timestamp</td>
                <td>
                    The date the code was created.
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">referrerName</th>
                <td>String</td>
                <td>
                    The name of the owner of this code. E.g. "Bob Testerson"
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">reward</th>
                <td>Object</td>
                <td>
                    Details of the reward attached to this code
                    
                    <table class="table table-hover apidocs-args">
                        <tr>
                            <th class="docs-monospace">type</th>
                            <td>String</td>
                            <td>
                                The unique identifier for the code. E.g. "BOBTESTERSON"
                            </td>
                        </tr>
                        <tr>
                            <th class="docs-monospace">unit</th>
                            <td>String</td>
                            <td>
                                A unique identifier for the type of reward. E.g. "cents" or "freemonth"
                            </td>
                            <td>
                                 Works with: @metadata.API.feature @metadata.API.freeTime @metadata.API.credit
                            </td>
                        </tr>
                        <tr>
                            <th class="docs-monospace">discountPercent</th>
                            <td>Integer</td>
                            <td>
                                The percent discount that the referral code is valid for. E.g. "10"
                            </td>
                            <td>
                                Works with: @metadata.API.discount
                            </td>
                        </tr>
                        <tr>
                            <th class="docs-monospace">monthsDiscountIsValid</th>
                            <td>Integer</td>
                            <td>
                                The duration that the discount is valid for. E.g. "12" months
                            </td>
                            <td>
                                Works with: @metadata.API.discount
                            </td>
                        </tr>
                        <tr>
                            <th class="docs-monospace">credit</th>
                            <td>Integer</td>
                            <td>
                                The amount of credit that this referral code is valid for. e.g. for $20 this object would have <code>credit=2000, unit="cents"</code>
                            </td>
                            <td>
                                Works with: @metadata.API.freeTime @metadata.API.credit
                            </td>
                        </tr>
                        <tr>
                            <th class="docs-monospace">featureType</th>
                            <td>String</td>
                            <td>
                                A unique identifier for the type of feature
                            </td>
                            <td>
                                Works with: @metadata.API.feature
                            </td>
                        </tr>
                        <tr>
                            <th class="docs-monospace">name</th>
                            <td>String</td>
                            <td>
                                The human readable name of the feature
                            </td>
                            <td>
                                Works with: @metadata.API.feature
                            </td>
                        </tr>
                        <tr>
                            <th class="docs-monospace">description</th>
                            <td>String</td>
                            <td>
                                The human readable description of the feature
                            </td>
                            <td>
                                Works with: @metadata.API.feature
                            </td>
                        </tr>
                        <tr>
                            <th class="docs-monospace">quantity</th>
                            <td>Integer</td>
                            <td>
                                The quantity of feature that this referral code is valid for. E.g. For 500mb fre space <code>quantity=500, unit="mb"</code>
                            </td>
                            <td>
                                Works with: @metadata.API.feature
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>


        @tags.exampleCurl("get_code",
"""
$ curl https://app.referralsaasquatch.com/api/v1/{TENANT_ALIAS}/code/BOBTESTERSON \
-u API_KEY: \
-H "Content-Type: application/json"
""",
"""
// Example 1
{
	"code": "BOBTESTERSON",
	"dateCreated": 1411600868797,
	"referrerName": "Bob Testerson",
	"reward": {
		"type": "PCT_DISCOUNT",
		"discountPercent": 10,
		"monthsDiscountIsValid": 12
	}
}


// Example 2
{
	"code": "BOBTESTERSON",
	"dateCreated": 1411600868797,
	"referrerName": "Bob Testerson",
	"reward": {
		"type": "CREDIT",
		"unit": "cents",
		"credit": 2000
	}
}


// Example 3
{
	"code": "BOBTESTERSON",
	"dateCreated": 1411600868797,
	"referrerName": "Bob Testerson",
	"reward": {
		"type": "FEATURE",
		"featureType": "storage",
		"name": "100 MB Storage",
		"description": "100 MB Free Storage",
		"quantity": 100,
		"unit": "MB"
	}
}
""")


    </div><!-- // .apidocs-section -->












        <div class="apidocs-section">

        <h2>List Reward Balances</h2>
        <a id="list_balances" name="list_balances" class="section-anchor">&nbsp;</a>

        <p>Looks up the balance for all rewards of the same type and units. Works with: @metadata.API.discount @metadata.API.feature @metadata.API.freeTime @metadata.API.credit</p>
        <h4>Definition</h4>
        <pre class="prettyprint lang-curl">GET https://app.referralsaasquatch.com/api/v1/{TENANT_ALIAS}/reward/balance</pre>

        <h4>Arguments</h4>
        <div>
            <table class="table table-hover apidocs-args">
               <tr>
                <th class="docs-monospace">accountId</th>
                <td><span class="label">Required</span></td>

                <td>
                    The ID of the account to look up.
                </td>
              </tr>

              <tr>
                <th class="docs-monospace">rewardTypeFilter</th>
                <td><span class="label">Optional</span></td>
                <td>
                    Filters rewards by type.
                </td>
              </tr>
              <tr>
                <th class="docs-monospace">userId</th>
                <td><span class="label">Optional</span></td>
                <td>
                    Filters rewards by user.
                </td>
              </tr>
              <tr>
                <th class="docs-monospace">featureTypeFilter</th>
                <td><span class="label">Optional</span></td>
                <td>
                    Filters rewards by feature type.
                </td>
                <td>
                     Works with: @metadata.API.feature
                </td>
              </tr>
            </table>
        </div>
        
        
        <h4>Returns</h4>
        <p>A list of reward balances</p>

        <table class="table table-hover apidocs-args">
            <tr>
                <th class="docs-monospace">type</th>
                <td>Enum</td>
                <td>
                    The type of reward. One of either the following:
                    <table class="table">
                        <tr>
                            <td>@metadata.API.discount</td>
                            <td><code>PCT_DISCOUNT</code></td>
                        </tr>
                        <tr>
                            <td>@metadata.API.feature</td>
                            <td><code>FEATURE</code></td>
                        </tr>
                        <tr>
                            <td>@metadata.API.freeTime</td>
                            <td><code>TIME_CREDIT</code></td>
                        </tr>
                        <tr>
                            <td>@metadata.API.credit</td>
                            <td><code>CREDIT</code></td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">unit</th>
                <td>String</td>
                <td>
                    An identifier for the unit of the reward. E.g. "credit-in-cents", "freemb", "giftcard20", "tshirt", "freemonth"
                </td>
                <td>
                    Works with: <br/>
                    @metadata.API.feature
                    @metadata.API.freeTime
                    @metadata.API.credit
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">count</th>
                <td>Integer</td>
                <td>
                    The number of rewards earned. Usually is equal to the number of successful referrals made. E.g. An account has $80 of credit due to the referral program. $60 from making referrals, $20 from being referred. The <code>count</code> would be <strong>4</strong> rewards, each worth $20.
                </td>
                <td>
                    Works with: <br/>
                    @metadata.API.feature
                    @metadata.API.freeTime
                    @metadata.API.credit
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">totalQuantity</th>
                <td>Integer</td>
                <td>
                    The total <code>quantity</code> for all features of the same <code>featureType</code>.
                </td>
                <td>
                    Works with: <br/>
                    @metadata.API.feature
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">featureType</th>
                <td>String</td>
                <td>
                    A unique identifier for the type of feature. E.g. "freeSeats" or "freeMb".
                </td>
                <td>
                    Works with: <br/>  @metadata.API.feature
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">totalAssignedCredit</th>
                <td>Integer</td>
                <td>
                    The total <code>assignedCredit</code> for all reward credits of the same <code>unit</code> type.
                </td>
                <td>
                    Works with: <br/>
                    @metadata.API.credit
                    @metadata.API.freeTime
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">totalRedeemedCredit</th>
                <td>Integer</td>
                <td>
                    The total <code>redeemedCredit</code> for all reward credits of the same <code>unit</code> type.
                </td>
                <td>
                    Works with: <br/>
                    @metadata.API.credit
                    @metadata.API.freeTime
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">totalDiscountPercent</th>
                <td>Integer</td>
                <td>
                    The total <code>discountPercent</code> from all rewards
                </td>
                <td>
                    Works with: <br/> @metadata.API.discount
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">referredDiscountPercent</th>
                <td>Integer</td>
                <td>
                    The total <code>discountPercent</code> from rewards with <code>rewardSource = REFERRED</code>
                </td>
                <td>
                    Works with: <br/> @metadata.API.discount
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">referrerDiscountPercent</th>
                <td>Integer</td>
                <td>
                    The total <code>discountPercent</code> from rewards with <code>rewardSource = FRIEND_SIGNUP</code>
                </td>
                <td>
                    Works with: <br/> @metadata.API.discount
                </td>
            </tr>            
                
            </table>

@tags.exampleCurl("list_balances",
"""
$ curl https://app.referralsaasquatch.com/api/v1/{TENANT_ALIAS}/reward/balance?accountId=XYZ[&userId=123][&rewardTypeFilter=FEATURE|CREDIT|PCT_DISCOUNT][&featureTypeFilter=megaAddon] \
-u API_KEY: \
-H "Content-Type: application/json"
""",
"""
[
    {
    	"type": "FEATURE",
    	"featureType": "storage",
    	"count": 8,
    	"totalQuantity": 500,
    	"unit": "MB"
    },
    {
    	"type": "CREDIT",
    	"count": 4,
    	"totalAssignedCredit": 10000,
    	"totalRedeemedCredit" : 0,
    	"unit": "cents"
    },
    {
    	"type": "PCT_DISCOUNT",
    	"totalDiscountPercent": 30,
    	"referredDiscountPercent": 10,
    	"referrerDiscountPercent": 20
    }
]
""")

    </div><!-- // .apidocs-section -->






















        <div class="apidocs-section">

        <h2>Debit a reward balance</h2>
        <a id="debit_balance" name="debit_balance" class="section-anchor">&nbsp;</a>

        <p>Used to redeem the credit earned from a referral program. Permanently debits an account balance. Works with: @metadata.API.freeTime @metadata.API.credit</p>
        
        <h4>Definition</h4>
        <pre class="prettyprint lang-curl">GET https://app.referralsaasquatch.com/api/v1/{TENANT_ALIAS}/credit/bulkredeem</pre>

        <h4>Arguments</h4>
        <div>
            <table class="table table-hover apidocs-args">
               <tr>
                <th class="docs-monospace">accountId</th>
                <td><span class="label">Required</span></td>

                <td>
                    The ID of the account to be debitted.
                </td>
              </tr>
              <tr>
                <th class="docs-monospace">unit</th>
                <td><span class="label">Required</span></td>
                <td>
                    The type of credit to be debitted. E.g. "free-months" or "cents"
                </td>
              </tr>
              <tr>
                <th class="docs-monospace">amount</th>
                <td><span class="label">Required</span></td>
                <td>
                    The amount of credit to be debitted.
                </td>
              </tr>
            </table>
        </div>
        
        
        <h4>Returns</h4>
        <p>Details about the successful transaction. If there is not enough credit to perform this transaction, then an error will be returned instead.</p>

        <table class="table table-hover apidocs-args">
            <tr>
                <th class="docs-monospace">creditRedeemed</th>
                <td>Integer</td>
                <td>
                    The amount of credit that was just debitted. 
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">unit</th>
                <td>String</td>
                <td>
                    The type of credit that was just debitted.
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">creditAvailable</th>
                <td>Integer</td>
                <td>
                    The remaining credit in this account of the same <code>unit</code> type.
                </td>
            </tr>
        </table>
        

@tags.exampleCurl("debit_balance",
"""
$ curl https://app.referralsaasquatch.com/api/v1/TENANT_ALIAS/credit/bulkredeem \
-u API_KEY: \
-H "Content-Type: application/json" \
-d '{
	"accountId" : "XYZ",
	"amount" : 200, 
	"unit" : "cents"
}'
""",
"""
{
	"creditRedeemed": 200,
	"creditAvailable": 0,
	"unit": "cents"
}
""")

    </div><!-- // .apidocs-section -->














        <div class="apidocs-section">
        
        <h2>List an account's rewards</h2>
        <a id="list_rewards" name="list_rewards" class="section-anchor">&nbsp;</a>

        <p>Looks up a single reward. Works with: @metadata.API.discount @metadata.API.feature @metadata.API.freeTime @metadata.API.credit</p>
        <h4>Definition</h4>
        <pre class="prettyprint lang-curl">GET https://app.referralsaasquatch.com/api/v1/{TENANT_ALIAS}/reward</pre>

        <h4>Arguments</h4>
        <div>
            <table class="table table-hover apidocs-args">
               <tr>
                <th class="docs-monospace">accountId</th>
                <td><span class="label">Required</span></td>

                <td>
                    The ID of the account to look up.
                </td>
              </tr>

              <tr>
                <th class="docs-monospace">rewardTypeFilter</th>
                <td><span class="label">Optional</span></td>
                <td>
                    Filters rewards by type.
                </td>
              </tr>
              <tr>
                <th class="docs-monospace">userId</th>
                <td><span class="label">Optional</span></td>
                <td>
                    Filters rewards by user.
                </td>
              </tr>
              <tr>
                <th class="docs-monospace">featureTypeFilter</th>
                <td><span class="label">Optional</span></td>
                <td>
                    Filters rewards by feature type.
                </td>
                <td>
                     Works with: @metadata.API.feature
                </td>
              </tr>
            </table>
        </div>
    
        <h4>Returns</h4>
        <p>A list of rewards</p>

        <table class="table table-hover apidocs-args">
            <tr>
                <th class="docs-monospace">id</th>
                <td>String</td>
                <td>
                    The unique identifier for this reward
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">type</th>
                <td>Enum</td>
                <td>
                    The type of reward. One of either the following:
                    <table class="table">
                        <tr>
                            <td>@metadata.API.discount</td>
                            <td><code>PCT_DISCOUNT</code></td>
                        </tr>
                        <tr>
                            <td>@metadata.API.feature</td>
                            <td><code>FEATURE</code></td>
                        </tr>
                        <tr>
                            <td>@metadata.API.freeTime</td>
                            <td><code>TIME_CREDIT</code></td>
                        </tr>
                        <tr>
                            <td>@metadata.API.credit</td>
                            <td><code>CREDIT</code></td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">dateGiven</th>
                <td>Timestamp</td>
                <td>
                    When this reward was earned.
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">dateExpires</th>
                <td>Timestamp</td>
                <td>
                    When this reward is set to expire.
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">dateCancelled</th>
                <td>Timestamp</td>
                <td>
                    If the reward is <code>cancellable</code> and has been cnacelled, the date it was cancelled on. Null if not never cancelled.
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">cancellable</th>
                <td>Boolean</td>
                <td>
                    If a reward is <code>cancellable</code> then it may be revoked. If it has been cancelled then <code>dateCancelled</code> will be non-null.
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">rewardSource</th>
                <td>Enum</td>
                <td>
                    The type of the source of the reward. One of either <code>FRIEND_SIGNUP</code> or <code>REFERRED</code>.
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">unit</th>
                <td>String</td>
                <td>
                    An identifier for the unit of the reward. E.g. "credit-in-cents", "freemb", "giftcard20", "tshirt", "freemonth"
                </td>
                <td>
                    Works with: <br/>
                    @metadata.API.feature
                    @metadata.API.freeTime
                    @metadata.API.credit
                </td>
            </tr>
            
            <tr>
                <th class="docs-monospace">discountPercent</th>
                <td>Integer</td>
                <td>
                    The percent discount. E.g. <code>10</code> means 10%
                </td>
                <td>
                    Works with: <br/> @metadata.API.discount
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">featureType</th>
                <td>String</td>
                <td>
                    A unique identifier for the type of feature. E.g. "freeSeats" or "freeMb".
                </td>
                <td>
                    Works with: <br/>  @metadata.API.feature
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">name</th>
                <td>String</td>
                <td>
                    The name of the feature. e.g. "Free Seats" or "Free Storage"
                </td>
                <td>
                    Works with: <br/> @metadata.API.feature
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">description</th>
                <td>String</td>
                <td>
                    The feature description. e.g. "Bonus user seats for your account" or "Extra megabytes of free storage"
                </td>
                <td>
                    Works with: <br/> @metadata.API.feature
                </td>
            </tr>

            <tr>
                <th class="docs-monospace">quantity</th>
                <td>Integer</td>
                <td>
                    The earned quantity of the feature
                </td>
                <td>
                    Works with: <br/> @metadata.API.feature
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">assignedCredit</th>
                <td>Integer</td>
                <td>
                    The earned quantity of the feature
                </td>
                <td>
                    Works with: <br/> @metadata.API.freeTime @metadata.API.credit
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">redeemedCredit</th>
                <td>Integer</td>
                <td>
                    The redeemed quantity of the feature
                </td>
                <td>
                    Works with: <br/> @metadata.API.freeTime @metadata.API.credit
                </td>
            </tr>
        </table>

@tags.exampleCurl("list_rewards",
"""
$ curl https://app.referralsaasquatch.com/api/v1/TENANT_ALIAS/coupon?accountId=XYZ[&userId=123][&rewardTypeFilter=FEATURE|CREDIT|PCT_DISCOUNT][&featureTypeFilter=megaAddon] \
-u API_KEY: \
-H "Content-Type: application/json"
""",
"""
[{
    "type": "FEATURE",
    "id": "5423508fe4b05184a716a08b",
    "dateGiven": 1411600527094,
    "dateExpires": null,
    "dateCancelled": null,
    "accountId": "F3BNA0HOKJR17656",
    "userId": "5423508ee4b059bbbadf48e1",
    "cancellable": false,
    "rewardSource": "REFERRED",
    "featureType": "storage",
    "name": "100 MB Storage",
    "description": "100 MB Free Storage",
    "quantity": 100,
    "unit": "MB"
},
{
    "type": "PCT_DISCOUNT",
    "id": "54235160e4b05184a716a0b2",
    "dateGiven": 1411600736220,
    "dateExpires": 1443136736220,
    "dateCancelled": null,
    "accountId": "GUYRP0T2F6F3Y6PN",
    "userId": "54235132e4b059bbbadf4903",
    "cancellable": true,
    "rewardSource": "FRIEND_SIGNUP",
    "discountPercent": 10
},
{
    "type": "CREDIT",
    "id": "542351e4e4b05184a716a0c5",
    "dateGiven": 1411600868797,
    "dateExpires": null,
    "dateCancelled": null,
    "accountId": "85W7A2F1QZS9NGI8",
    "userId": "542351e4e4b059bbbadf496d",
    "cancellable": false,
    "rewardSource": "FRIEND_SIGNUP",
    "unit": "cents",
    "assignedCredit": 10000,
    "redeemedCredit": 0,
    "redeemable": true
}]
""")

    </div><!-- // .apidocs-section -->

        
        
        
        
        
        
        
        
        
        
        
        
        
        

        <div class="apidocs-section">

        <h2>Redeem a single reward</h2>
        <a id="debit_reward" name="debit_reward" class="section-anchor">&nbsp;</a>

        <p>Used to redeem an individual credit earned from a referral program. Works with: @metadata.API.freeTime @metadata.API.credit</p>
        
        <h4>Definition</h4>
        <pre class="prettyprint lang-curl">GET https://app.referralsaasquatch.com/api/v1/{TENANT_ALIAS}/credit/{ID}/redeem</pre>

        <h4>Arguments</h4>
        <div>
            <table class="table table-hover apidocs-args">
               <tr>
                <th class="docs-monospace">id</th>
                <td><span class="label">Required</span></td>

                <td>
                    The ID of the specific reward to be redeemed.
                </td>
              </tr>
              <tr>
                <th class="docs-monospace">unit</th>
                <td><span class="label">Required</span></td>
                <td>
                    The type of credit to be debitted. E.g. "free-months" or "cents"
                </td>
              </tr>
              <tr>
                <th class="docs-monospace">amount</th>
                <td><span class="label">Required</span></td>
                <td>
                    The amount of credit to be debitted.
                </td>
              </tr>
            </table>
        </div>
        
        
        <h4>Returns</h4>
        <p>Details about the successful transaction. If there is not enough credit to perform this transaction, then an error will be returned instead.</p>

        <table class="table table-hover apidocs-args">
            <tr>
                <th class="docs-monospace">creditRedeemed</th>
                <td>Integer</td>
                <td>
                    The amount of credit that was just debitted.
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">unit</th>
                <td>String</td>
                <td>
                    The type of credit that was just debitted.
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">creditAvailable</th>
                <td>Integer</td>
                <td>
                    The remaining credit in this account of the same <code>unit</code> type.
                </td>
            </tr>
        </table>
        

@tags.exampleCurl("debit_reward",
"""
$ curl https://app.referralsaasquatch.com/api/v1/TENANT_ALIAS/reward/{ID}/redeem \
-u API_KEY: \
-H "Content-Type: application/json" \
-d '{
	"amount": 1000, 
	"unit": "cents"
}'
""",
"""
{
	"creditRedeemed": 1000,
	"creditAvailable": 0,
	"unit": "cents"
}
""")

    </div><!-- // .apidocs-section -->





        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <div class="apidocs-section">
         
        <h2>Set discount code on an account</h2>
        <a id="set_coupon" name="set_coupon" class="section-anchor">&nbsp;</a>

        <p>This method associates a new account with their referrer. Use this method when someone signs up for a paid account to set the coupon code used for them.  For Stripe and Recurly do not use this call. Instead
            during sign-up, just pass the coupon/referral code in your subcribe call. Works with: @metadata.API.discount
        </p>
        <h4>Definition</h4>
        <pre class="prettyprint lang-curl">POST https://app.referralsaasquatch.com/api/v1/{TENANT_ALIAS}/coupon</pre>

        <h4>Arguments</h4>
        <div>
            <table class="table table-hover apidocs-args">
              <tr>
                <th class="docs-monospace">couponCode</th>
                <td><span class="label">Required</span></td>
                <td>
                    The coupon/referral code of the user that referred this user. Can be obtained from the referral-tracking cookie using <a href="#autofill">squatch.js coupon autofill</a>.
                </td>
              </tr>
              <tr>
                <th class="docs-monospace">accountId</th>
                <td><span class="label">Required</span></td>
                <td>
                    We use this ID to link a group of users together. See <a href="/shared-vs-solo-accounts">Shared vs Solo Accounts</a> to see what you should use here.
                </td>
              </tr>
              <tr>
                <th class="docs-monospace">paymentProviderId</th>
                <td><span class="label">Required</span></td>
                <td>
                    The payment provider ID of the newly created account from Braintree or Zuora. This will be the Braintree Account ID or the Zuora Account ID of the newly created account.
                </td>
              </tr>
            </table>
        </div>
    
        <h4>Returns</h4>
        <p>HTTP Status with an Empty Response Body</p>
        <table class="table table-hover apidocs-args">
            <tr>
            <th>Braintree</th>
            <td>
                HTTP 201 on success
            </td>
            <td>
                Sets the value of the <code>saasquatch_coupon</code> custom field in Braintree and triggers an update to the referrer's account.
            </td>
            </tr>
            <tr>
            <th>Zuora</th>
            <td>
                HTTP 201 on success
            </td>
            <td>
                Sets the value of the <code>saasquatchCoupon</code> custom field in Zuora and triggers an update to the referrer's account.
            </td>
            </tr>
            <tr>
            <th>Recurly</th>
            <td>
                HTTP 400 not implemented
            </td>
            <td>
                Pass the coupon code to <a href="http://docs.recurly.com/api/subscriptions#create-subscription">Recurly Create Subscription</a> instead.
            </td>
            </tr>
            <tr>
            <th>Stripe</th>
            <td>
                HTTP 400 not implemented
            </td>
            <td>
                 Pass the coupon code to <a href="https://stripe.com/docs/api#create_customer">Stripe Create Customer</a> instead.
            </td>
            </tr>
            <tr>
            <th>Generic / API</th>
            <td>
                HTTP 400 not implemented
            </td>
            <td>
                Pass the coupon code to the <a href="/api/methods#account_sync">account sync</a> API endpoint instead.
            </td>
            </tr>
        </table>
            

@tags.exampleCurl("set_coupon",
"""
$ curl https://app.referralsaasquatch.com/api/v1/TENANT_ALIAS/coupon \
-u API_KEY: \
-H "Content-Type: application/json" \
-d '
{
    "couponCode" : "BOBTESTERSON", 
    "accountId" : "abc", 
    "paymentProviderId" : "cus_123"
}'
""",
"""
HTTP 201 Success (No response body)
""")

    </div><!-- // .apidocs-section -->

        
        
        
        
        
        
        
        
        
        
        
        
        
        <div class="apidocs-section">
         
        <h2>Lookup a discount code</h2>
        <a id="get_coupon" name="get_coupon" class="section-anchor">&nbsp;</a>

        <p>This method lets you look up the details of a referral code and ensure that it's valid.  Works with: @metadata.API.discount</p>
        <h4>Definition</h4>
        <pre class="prettyprint lang-curl">GET https://app.referralsaasquatch.com/api/v1/{TENANT_ALIAS}/coupon/{CODE}</pre>

        <h4>Arguments</h4>
        <div>
            <table class="table table-hover apidocs-args">
              <tr>
                <th class="docs-monospace">code</th>
                <td><span class="label">Required</span></td>
                <td>
                    The coupon/referral code to look up
                </td>
              </tr>
            </table>
        </div>
    
        <h4>Returns</h4>
        <p>Information about the coupon, or an HTTP 404 if the coupon code is not found.</p>
        <table class="table table-hover apidocs-args">
            <tr>
                <th class="docs-monospace">couponCode</th>
                <td>String</td>
                <td>
                    The coupon/referral code
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">discountPercentage</th>
                <td>Number</td>
                <td>
                    An integer representing the discount percentage. e.g. For 10% would return the number 10.
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">dateCreated</th>
                <td>Timestamp</td>
                <td>
                    The coupon/referral code to look up
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">ratePlanId</th>
                <td>String</td>
                <td>
                    <span class="label">Zuora only</span>
                    The Zuora rate plan ID used to apply this coupon.
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">discountId</th>
                <td>String</td>
                <td>
                    <span class="label">Braintree only</span>
                    The Braintree discount ID used to apply this coupon.
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">referrerName</th>
                <td>String</td>
                <td>
                    The full name of the referrer who owns this code.
                </td>
            </tr>
        </table>
        
@tags.exampleCurl("get_coupon",
"""
$ curl https://app.referralsaasquatch.com/api/v1/{TENANT_ALIAS}/coupon/JOHNDOE \
-u API_KEY: \
-H "Content-Type: application/json"
""",
"""
{
    "couponCode" : "JOHNDOE", 
    "discountPercentage" : 20, 
    "dateCreated" : 1377727546528,
    "discountId" : "saasquatch_discount"
}
""")

    </div><!-- // .apidocs-section -->
        
        
        
        
        
        <div class="apidocs-section">
        
        <h2>Lookup an account's discount</h2>
        <a id="get_account_reward" name="get_account_reward" class="section-anchor">&nbsp;</a>

        <p>This method associates a new account with their referrer. Use this method when someone signs up for a paid account to set the coupon code used for them.  Works with: @metadata.API.discount</p>
        <h4>Definition</h4>
        <pre class="prettyprint lang-curl">GET https://app.referralsaasquatch.com/api/v1/{TENANT_ALIAS}/account/{ACCOUNT_ID}/reward</pre>

        <h4>Arguments</h4>
        <div>
            <table class="table table-hover apidocs-args">
              <tr>
                <th class="docs-monospace">accountId</th>
                <td><span class="label">Required</span></td>
                <td>
                    The account to look up
                </td>
              </tr>
              <tr>
                <th class="docs-monospace">couponCode</th>
                <td><span class="label">Optional</span></td>
                <td>
                    When included, will return a total reward available including any coupon code.
                </td>
              </tr>
              </table>
        </div>
    
        <h4>Returns</h4>
        <p>Information about the account's reward, if any, or an HTTP 404 if the account doesn't exist in SaaSquatch yet.</p>
        <table class="table table-hover apidocs-args">
            <tr>
                <th class="docs-monospace">accountId</th>
                <td>String</td>
                <td>
                    The account id
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">discountPercentage</th>
                <td>Number</td>
                <td>
                    An integer representing the total discount percentage from the referral program. e.g. For 10% would return the number 10. <code>discountPercentage = referredDiscountPercent + referrerDiscountPercent</code>
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">referredDiscountPercent</th>
                <td>Number</td>
                <td>
                    An integer representing the discount percentage from being referred. This will only have a value if the account has a coupon/referral code 
                    already associated with it, or if <code>couponCode</code> was passed as an argument.
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">referrerDiscountPercent</th>
                <td>Number</td>
                <td>
                    An integer representing the discount earned from referring other accounts.
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">ratePlanId</th>
                <td>String</td>
                <td>
                    <span class="label">Zuora only</span>
                    The Zuora rate plan ID used to apply the discount.
                </td>
            </tr>
            <tr>
                <th class="docs-monospace">discountId</th>
                <td>String</td>
                <td>
                    <span class="label">Braintree only</span>
                    The Braintree discount ID used to apply the discount.
                </td>
            </tr>
            <tr>
            	<th class="docs-monospace">referrerName</th>
            	<td>String</td>
            	<td>
            		The first and last name of the referrer that referred the user or null if no referrer exists.
            	</td>
            </tr>
        </table>
        
@tags.exampleCurl("get_account_reward",
"""
$ curl https://app.referralsaasquatch.com/api/v1/{TENANT_ALIAS}/account/SV0TYE5OWI11120144/reward \
-u API_KEY: \
-H "Content-Type: application/json"
""",
"""
{
    "accountId":"SV0TYE5OWI11120144",
    "discountPercentage":10,
    "referrerDiscountPercent":0,
    "referredDiscountPercent":10,
    "discountId":"saasquatch_discount"
}
""")

    </div><!-- // .apidocs-section -->
        
        
        
        
        
        
        
        
        
        
        @* 
            Includes the webhook method reference here
        *@
        @tags.webhookMethods()


    </section>
}
